# Migration `20190730160701-user`

This migration has been generated by pehtoorismies at 7/30/2019, 4:07:01 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `db`.`User` ADD COLUMN `auth0Id` varchar(1000) NOT NULL DEFAULT '' ;

CREATE UNIQUE INDEX `User.auth0Id._UNIQUE` ON `db`.`User`(`auth0Id`)
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration 20190729201153-init..20190730160701-user
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
   provider = "mysql"
   url      = "mysql://user:password@localhost:3306/db?sslmode=prefer"
 }
- generator photonjs {
+generator photonjs {
   provider = "photonjs"
   // output   = "node_modules/@generated/photon"
 }
@@ -13,13 +13,14 @@
   // output   = "node_modules/@generated/nexus-prisma"
 }
 model User {
-  id    String  @id @default(cuid())
-  username  String @unique
-  name  String?
-  email String  @unique
-  events Event[]
+  id       String  @id @default(cuid())
+  username String  @unique
+  name     String?
+  email    String  @unique
+  events   Event[]
+  auth0Id  String  @unique
 }
 enum EventType {
   Cycling
@@ -36,20 +37,18 @@
   Ultras
 }
 model Event {
-  id    String  @id @default(cuid())
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
-  title String
-  subtitle String
-  date DateTime
-  time String?
-  address String?
-  description String?
-  race Boolean @default(false)
-  type EventType
+  id           String    @id @default(cuid())
+  createdAt    DateTime  @default(now())
+  updatedAt    DateTime  @updatedAt
+  title        String
+  subtitle     String
+  date         DateTime
+  time         String?
+  address      String?
+  description  String?
+  race         Boolean   @default(false)
+  type         EventType
   participants User[]
-  
-}
-
+}
```

## Photon Usage

You can use a specific Photon built for this migration (20190730160701-user)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190730160701-user'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
