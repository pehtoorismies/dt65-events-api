# Migration `20190729201153-init`

This migration has been generated by pehtoorismies at 7/29/2019, 8:11:53 PM.
You can check out the [state of the datamodel](./datamodel.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `db`.`User`(`id` varchar(1000) NOT NULL  ,`username` varchar(1000) NOT NULL DEFAULT '' ,`name` varchar(1000)   ,`email` varchar(1000) NOT NULL DEFAULT '' ,PRIMARY KEY (`id`));

CREATE TABLE `db`.`Event`(`id` varchar(1000) NOT NULL  ,`createdAt` datetime(3) NOT NULL  ,`updatedAt` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,`title` varchar(1000) NOT NULL DEFAULT '' ,`subtitle` varchar(1000) NOT NULL DEFAULT '' ,`date` datetime(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,`time` varchar(1000)   ,`address` varchar(1000)   ,`description` varchar(1000)   ,`race` boolean NOT NULL DEFAULT false ,`type` varchar(1000) NOT NULL DEFAULT 'Cycling' ,PRIMARY KEY (`id`));

CREATE TABLE `db`.`_EventToUser`(`A` varchar(1000) NOT NULL , FOREIGN KEY (`A`) REFERENCES `db`.`Event`(`id`),`B` varchar(1000) NOT NULL , FOREIGN KEY (`B`) REFERENCES `db`.`User`(`id`));

CREATE UNIQUE INDEX `User.username._UNIQUE` ON `db`.`User`(`username`)

CREATE UNIQUE INDEX `User.email._UNIQUE` ON `db`.`User`(`email`)
```

## Changes

```diff
diff --git datamodel.mdl datamodel.mdl
migration ..20190729201153-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,55 @@
+datasource db {
+  provider = "mysql"
+  url      = "mysql://user:password@localhost:3306/db?sslmode=prefer"
+}
+
+ generator photonjs {
+  provider = "photonjs"
+  // output   = "node_modules/@generated/photon"
+}
+
+generator nexus_prisma {
+  provider = "nexus-prisma"
+  // output   = "node_modules/@generated/nexus-prisma"
+}
+
+model User {
+  id    String  @id @default(cuid())
+  username  String @unique
+  name  String?
+  email String  @unique
+  events Event[]
+}
+
+enum EventType {
+  Cycling
+  Karonkka
+  Meeting
+  Orienteering
+  Other
+  Running
+  Skiing
+  Spinning
+  Swimming
+  TrackRunning
+  Triathlon
+  Ultras
+}
+
+model Event {
+  id    String  @id @default(cuid())
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  title String
+  subtitle String
+  date DateTime
+  time String?
+  address String?
+  description String?
+  race Boolean @default(false)
+  type EventType
+  participants User[]
+  
+}
+
+
```

## Photon Usage

You can use a specific Photon built for this migration (20190729201153-init)
in your `before` or `after` migration script like this:

```ts
import Photon from '@generated/photon/20190729201153-init'

const photon = new Photon()

async function main() {
  const result = await photon.users()
  console.dir(result, { depth: null })
}

main()

```
